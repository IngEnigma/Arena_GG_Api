Login
El usuario podrÃ¡ iniciar sesiÃ³n utilizando su nombre de usuario y contraseÃ±a.

Registro
El usuario podrÃ¡ crear una cuenta proporcionando su correo electrÃ³nico, nombre de usuario y contraseÃ±a.

Ranking
Se podrÃ¡ ver un ranking por juego (segÃºn el juego seleccionado).

Cada entrada del ranking mostrarÃ¡:

Nombre de usuario

NÃºmero de partidas jugadas

NÃºmero de victorias

Puntos acumulados

PosiciÃ³n en el ranking

Torneos (Tournaments)
Se podrÃ¡n filtrar torneos por:

Juego seleccionado

Fecha: Este mes (this month) o despuÃ©s (after)

Estado: open (abierto), in progress (en curso), closed (cerrado)

La lista de torneos mostrarÃ¡:

Logo del juego

Nombre del torneo

Estado

Premios

Detalle del Torneo (Tournament Detail)
Al seleccionar un torneo, se podrÃ¡ visualizar:

Nombre del juego

Fecha de inicio

Cupos disponibles

Modalidad: Solo / Grupo

Reglas del torneo

Requisitos

Premios

Bracket (estructura del torneo)

Lista de participantes

OpciÃ³n para suscribirse al torneo

Panel de AdministraciÃ³n (Admin Panel)
Mismas opciones de filtrado que los torneos pÃºblicos:

Juego, fecha (this month, after), estado (open, in progress, closed)

Muestra una lista de torneos con:

Logo del juego

Nombre del torneo

Estado

Premios

Detalle del Torneo - Admin (Admin Tournament Detail)
VisualizaciÃ³n del torneo con acceso administrativo:

Nombre del juego

Fecha de inicio

Cupos

Modalidad: Solo / Grupo

Reglas, requisitos, premios, bracket, participantes

Estado del torneo

Botones para:

Editar torneo

Eliminar torneo

EdiciÃ³n de Torneo - Admin (Admin Tournament Edit)
Formulario para editar los datos del torneo:

Nombre del juego

Fecha de inicio

Cupos

Modalidad

Reglas, requisitos, premios, bracket

Lista editable de participantes (con opciÃ³n para eliminar)

Estado del torneo

Botones:

Aplicar cambios

Cancelar

CreaciÃ³n de Torneo - Admin (Admin Tournament Create)
Formulario para crear un nuevo torneo, ingresando:

Nombre del juego

Fecha de inicio

Cupos

Modalidad

Reglas, requisitos, premios, bracket

Lista inicial de participantes (opcional)

Estado del torneo

Botones:

Crear torneo

Cancelar


============================================= SQL ===================================================

-- ENUMs actualizados
CREATE TYPE tournament_mode AS ENUM ('Solo', 'Team');
CREATE TYPE tournament_status AS ENUM ('Open', 'Progress', 'Closed');
CREATE TYPE bracket_type AS ENUM (
  'Single Elimination',
  'Double Elimination',
  'Free For All',
  'Round Robin',
  'Swiss',
  'Leaderboard'
);
CREATE TYPE game_name AS ENUM (
  'League of Legends',
  'Rocket League',
  'Counter Strike',
  'Valorant'
);

-- Tabla de usuarios
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(100) NOT NULL UNIQUE,
  username VARCHAR(50) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP
);

-- Tabla de rankings por juego
CREATE TABLE rankings (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  game_name game_name NOT NULL,
  matches_played INT DEFAULT 0,
  wins INT DEFAULT 0,
  points INT DEFAULT 0,
  rank_position INT,
  UNIQUE (user_id, game_name)
);

-- Tabla de torneos
CREATE TABLE tournaments (
  id SERIAL PRIMARY KEY,
  game_name game_name NOT NULL,
  name VARCHAR(255) NOT NULL,
  start_date DATE NOT NULL,
  max_slots INT NOT NULL,
  mode tournament_mode NOT NULL,
  rules TEXT,
  requirements TEXT,
  prizes TEXT,
  bracket_type bracket_type NOT NULL,
  status tournament_status NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP
);

-- Participantes en torneos de modalidad Solo
CREATE TABLE tournament_participants (
  id SERIAL PRIMARY KEY,
  tournament_id INT NOT NULL REFERENCES tournaments(id) ON DELETE CASCADE,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE (tournament_id, user_id)
);

-- Tabla de equipos (para torneos Team)
CREATE TABLE teams (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Miembros de cada equipo
CREATE TABLE team_members (
  id SERIAL PRIMARY KEY,
  team_id INT NOT NULL REFERENCES teams(id) ON DELETE CASCADE,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE (team_id, user_id)
);

-- ParticipaciÃ³n de equipos en torneos
CREATE TABLE tournament_teams (
  id SERIAL PRIMARY KEY,
  tournament_id INT NOT NULL REFERENCES tournaments(id) ON DELETE CASCADE,
  team_id INT NOT NULL REFERENCES teams(id) ON DELETE CASCADE,
  UNIQUE (tournament_id, team_id)
);

-- Administradores
CREATE TABLE admins (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL UNIQUE REFERENCES users(id) ON DELETE CASCADE
);


=======================================================================================================================

ğŸ›  TecnologÃ­as y Buenas PrÃ¡cticas Recomendadas
Ãrea	RecomendaciÃ³n
ORM	Prisma o TypeORM
AutenticaciÃ³n	JWT con Passport y bcrypt
ValidaciÃ³n	class-validator y class-transformer
DTOs	Para validar entradas en los endpoints
InyecciÃ³n de dependencias	Usar interfaces + providers
Testing	jest + mocks con interfaces
Logs y errores	LoggerService, HttpExceptionFilter
GestiÃ³n de estados	Usar enums para TournamentStatus, etc.

=========================================================================================================================

ğŸ§  SeparaciÃ³n de Responsabilidades
Controllers: manejan la entrada y salida HTTP, sin lÃ³gica de negocio.

Use-Cases: contienen la lÃ³gica de aplicaciÃ³n (ej. RegisterUser, GetTournamentRanking).

Entities: representan las reglas del negocio y objetos ricos del dominio.

Interfaces: definen contratos para inyecciÃ³n de dependencias (UserRepository, TournamentService).

Infra: implementaciones concretas (ORM, servicios externos como JWT, almacenamiento).

src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth/                    # MÃ³dulo de autenticaciÃ³n (login, registro)
â”‚   â”‚   â”œâ”€â”€ controllers/         # Controladores HTTP (NestJS)
â”‚   â”‚   â”œâ”€â”€ use-cases/           # Casos de uso (lÃ³gica de aplicaciÃ³n)
â”‚   â”‚   â”œâ”€â”€ entities/            # Entidades del dominio (ej. User)
â”‚   â”‚   â”œâ”€â”€ dto/                 # Data Transfer Objects
â”‚   â”‚   â”œâ”€â”€ services/            # Servicios de dominio o helpers
â”‚   â”‚   â”œâ”€â”€ interfaces/          # Interfaces y abstracciones (ej. repo)
â”‚   â”‚   â”œâ”€â”€ infra/               # Adaptadores concretos (repositorios, JWT, bcrypt)
â”‚   â”‚   â””â”€â”€ auth.module.ts
â”‚
â”‚   â”œâ”€â”€ rankings/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ use-cases/
â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”œâ”€â”€ infra/
â”‚   â”‚   â””â”€â”€ rankings.module.ts
â”‚
â”‚   â”œâ”€â”€ tournaments/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ use-cases/
â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”œâ”€â”€ infra/
â”‚   â”‚   â””â”€â”€ tournaments.module.ts
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ database/                # Conexiones, modelos TypeORM/Prisma/etc
â”‚   â”œâ”€â”€ decorators/              # Decoradores personalizados
â”‚   â”œâ”€â”€ guards/                  # JWT/Auth Guards
â”‚   â”œâ”€â”€ interceptors/           # Interceptores NestJS
â”‚   â”œâ”€â”€ middlewares/            # Middlewares NestJS
â”‚   â”œâ”€â”€ constants/              # Constantes generales
â”‚   â”œâ”€â”€ utils/                   # Utilidades generales
â”‚   â””â”€â”€ enums/                   # Enums compartidos
â”‚
â”œâ”€â”€ app.module.ts               # MÃ³dulo raÃ­z
â””â”€â”€ main.ts                     # Entry point

===================================================ROADMAP==================================================================

ğŸ§­ ROADMAP DE DESARROLLO - API NestJS de Torneos
ğŸ› ï¸ FASE 1: Setup Inicial del Proyecto
Inicializa el proyecto NestJS

bash
Copiar
Editar
nest new tournament-api
Instala dependencias bÃ¡sicas

bash
Copiar
Editar
npm install @nestjs/config @nestjs/jwt @nestjs/passport passport passport-jwt bcrypt class-validator class-transformer
npm install prisma --save-dev
npx prisma init
Configura .env y @nestjs/config

Variables: JWT_SECRET, DB_URL, etc.

Crea src/shared/config/config.module.ts y config.service.ts

Crea la estructura base de carpetas
Usa la propuesta anterior (modules/, shared/, etc.).

ğŸ‘¤ FASE 2: MÃ³dulo de AutenticaciÃ³n (auth)
Crea el mÃ³dulo auth

bash
Copiar
Editar
nest g module modules/auth
Define entidad User y su repositorio

Prisma o TypeORM

Campos: id, username, email, passwordHash

Implementa casos de uso

RegisterUserUseCase

LoginUserUseCase (genera JWT)

Controlador AuthController

POST /auth/register

POST /auth/login

Configura JWT Guard

JwtStrategy, AuthGuard, y decorador @User()

âœ… Con esto ya tienes login/registro y JWT funcionando.

ğŸ—ï¸ FASE 3: Estructura del Dominio ComÃºn
Define entidades base y DTOs

Tournament, RankingEntry, Game, User

DTOs para crear/editar torneos, rankings

Agrega enums y constantes en shared/

TournamentStatus, TournamentMode

ğŸ† FASE 4: MÃ³dulo de Rankings
Crea mÃ³dulo rankings

Define entidad RankingEntry

userId, gameId, playedGames, wins, points

Caso de uso GetGameRankingUseCase

Recibe un gameId y devuelve el top N de jugadores

Controlador RankingsController

GET /rankings/:gameId

ğŸŸï¸ FASE 5: MÃ³dulo de Torneos
Crea mÃ³dulo tournaments

Define entidad Tournament

id, name, gameId, date, slots, status, rules, prizes, participants, bracket, etc.

Casos de uso

GetTournamentsUseCase (con filtros)

GetTournamentDetailUseCase

SubscribeToTournamentUseCase

Controlador pÃºblico

GET /tournaments

GET /tournaments/:id

POST /tournaments/:id/subscribe

ğŸ›¡ï¸ FASE 6: Panel de AdministraciÃ³n
Define roles (opcional)

Admin vs Usuario comÃºn

Casos de uso

CreateTournamentUseCase

UpdateTournamentUseCase

DeleteTournamentUseCase

Controlador AdminTournamentsController

Usa @UseGuards(JwtGuard, RolesGuard)

CRUD: POST, PUT, DELETE torneos

GET con filtros igual que pÃºblico

ğŸ§ª FASE 7: Pruebas
Pruebas unitarias para:

Casos de uso (mock repositorios)

Servicios (helpers)

Pruebas de integraciÃ³n:

Endpoints principales

Herramientas sugeridas:

bash
Copiar
Editar
npm install --save-dev jest @types/jest ts-jest
ğŸš€ FASE 8: Extras y Mejora Continua
DocumentaciÃ³n con Swagger

bash
Copiar
Editar
npm install --save @nestjs/swagger swagger-ui-express
Validaciones con class-validator

Logging centralizado

CI/CD (GitHub Actions, Railway, etc.)

Despliegue (Render, Railway, Vercel con proxy, etc.)

ğŸ—‚ï¸ ORDEN DE EJECUCIÃ“N SUGERIDO
Setup + estructura

Auth completo

Rankings (lectura)

Torneos pÃºblicos

Panel admin (CRUD)

Roles y guardias

Pruebas

DocumentaciÃ³n y mejoras


